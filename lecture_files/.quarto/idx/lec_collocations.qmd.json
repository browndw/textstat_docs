{"title":"Collocations","markdown":{"yaml":{"title":"Collocations","subtitle":"Introduction to association measures","format":{"clean-revealjs":{"transition":"fade"}},"html-math-method":{"method":"mathjax","url":"https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"},"author":[{"name":"David Brown","orcid":"0000-0001-7745-6354","email":"dwb2@andrew.cmu.edu","affiliations":"Statistics & Data Science 36-468/668"}],"date":"last-modified","date-format":"[Fall] YYYY","title-slide-attributes":{"data-background-image":"img/img_shared/text_analysis.png","data-background-size":"5%","data-background-position":"30% 50%"},"bibliography":"refs/refs_collocations.bib"},"headingText":"Collocations & Association Measures","headingAttr":{"id":"","classes":[],"keyvalue":[["background-color","#40666e"]]},"containsRefs":false,"markdown":"\n\n\n## Collocations fundamentals  \n\n-  Using COCA, we can quickly replicate an experiment first conducted by Stubbs [-@stubbs1995collocations] in which he looked at the nouns that collocate with *cause*.\n\n![](img/img_collocations/coca_01.png)\n\n## Collocations fundamentals\n\n::: callout-warning\n## Question\n\nWhat pattern (or patterns) do you recognize?\n:::\n\n![](img/img_collocations/coca_02.png)\n\n## Collocations fundamentals\n\n::: callout-warning\n## Question\n\nWhat statistical problems do you see with using simple frequencies as a measure?\n:::\n\n![](img/img_collocations/coca_02.png)\n\n## Collocations fundamentals {background-image=\"img/img_collocations/group_01.png\"}\n\n::: aside\nImagine you are at a party with people hanging out in small groups...\n:::\n\n## Collocations fundamentals {background-image=\"img/img_collocations/group_02.png\"}\n\n::: aside\n... and \"death\" shows up...\n:::\n\n## Collocations fundamentals {background-image=\"img/img_collocations/group_03.png\"}\n\n::: aside\nA little later, \"cause\" arrives.\n:::\n\n## Collocations fundamentals {background-image=\"img/img_collocations/group_04.png\"}\n\n::: aside\nWhat if we have multiple \"causes\" and \"deaths\"?\n:::\n\n## Collocations fundamentals {background-image=\"img/img_collocations/group_04.png\" background-opacity=\".25\"}\n\n::: {style=\"padding-top: 450px;\"}\n::: callout-warning\n## Question\n\nWhat factors affect the likelihood of \"cause\" and \"effect\" being together in the same group?\n:::\n:::\n\n## Collocations fundamentals\n\n### A window or span.\n\n::: {style=\"font-size: 70%; font-family: monospace; padding-top: 25px;\"}\n|     Pre-node | Node | Post-node     |\n|----------------------------------------:|:-----:|------------------------------------------------------------------|\n| Does chocolate | cause | acne? After many studies, the answer is ... 'complicated' |\n| Shortage of sailors a | cause | for concern for Royal Canadian Navy |\n| Did wine | cause | a full-scale revolution in Armenia? |\n| Motorcycle explosion likely | cause | of Milton motel fire, manager reports |\n| Heavy rainfall, power outages | cause | school districts to close Friday - |\n| Bales of hay | cause | traffic backup along I-55, truck fire |\n:::\n\n## Collocations fundamentals\n\n### A window or span.\n\n::: {style=\"font-size: 70%; font-family: monospace; padding-top: 25px;\"}\n|     Pre-node | Node | Post-node     |\n|----------------------------------------:|:-----:|------------------------------------------------------------------|\n| Does [chocolate]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [acne]{style=\"background-color: #f5b2c6; opacity: 0.75;\"}? After many studies, the answer is ... 'complicated' |\n| Shortage of sailors [a]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [for]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} concern for Royal Canadian Navy |\n| Did [wine]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [a]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} full-scale revolution in Armenia? |\n| Motorcycle explosion [likely]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [of]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} Milton motel fire, manager reports |\n| Heavy rainfall, power [outages]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [school]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} districts to close Friday - |\n| Bales of [hay]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [traffic]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} backup along I-55, truck fire |\n:::\n\n::: aside\n(1L-1R)\n:::\n\n\n## Collocations fundamentals\n\n### A window or span.\n\n::: {style=\"font-size: 70%; font-family: monospace; padding-top: 25px;\"}\n|     Pre-node | Node | Post-node     |\n|----------------------------------------:|:-----:|------------------------------------------------------------------|\n| [Does chocolate]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [acne? After]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} many studies, the answer is ... 'complicated' |\n| Shortage of [sailors a]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [for concern]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} for Royal Canadian Navy |\n| [Did wine]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [a full-scale]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} revolution in Armenia? |\n| Motorcycle [explosion likely]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [of Milton]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} motel fire, manager reports |\n| Heavy rainfall, [power outages]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [school districts]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} to close Friday - |\n| Bales [of hay]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [traffic backup]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} along I-55, truck fire |\n:::\n\n::: aside\nA window or span can be symetrical (e.g, 2L-2R) as it is here, or asymetrical (0L-2R).\n:::\n\n## Collocations fundamentals\n\n### A window or span.\n\n::: {style=\"font-size: 70%; font-family: monospace; padding-top: 25px;\"}\n|     Pre-node | Node | Post-node     |\n|----------------------------------------:|:-----:|------------------------------------------------------------------|\n| [Does chocolate]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [acne? After]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} many studies, the answer is ... 'complicated' |\n| Shortage of [sailors a]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [for concern]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} for Royal Canadian Navy |\n| [Did wine]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [a full-scale]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} revolution in Armenia? |\n| Motorcycle [explosion likely]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [of Milton]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} motel fire, manager reports |\n| Heavy rainfall, [power outages]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [school districts]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} to close Friday - |\n| Bales [of hay]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [traffic backup]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} along I-55, truck fire |\n:::\n\n::: aside\nThis is based on Firth's [-@firth1957papers] principle of \"knowing  a word by the company it keeps\" -- a principle that undergirds current LLMs and which we discussed in our introduction to them.\n:::\n\n\n## Association measures\n\n-  Pointwise mutual information (PMI) [@church1990word]. [See Brezina, chapter 3](https://www.cambridge.org/core/books/statistics-in-corpus-linguistics/semantics-and-discourse/3CC9D42A719A484A565BC139E9353A2C#A-sec-32).\n\n::: {style=\"font-size: 65%;\"}\nThe formula for calculating MI is as follows:\n\n$$\nPMI = log_{2} \\left( \\frac{O_{11}}{E_{11}} \\right)\n$$\n\nWhere *O~11~* and *E~11~* are the observed (i.e., collocate in the span divided by the total number of words in the corpus) and expected frequencies of the node word within a given window. The expected frequency is given by:\n\n$$\nE_{11} = \\frac{R_{1} \\times C_{1}}{N}\n$$\n\n* *N* is the number of words in the corpus\n* *R~1~* is the frequency of the node in the whole corpus\n* *C~1~*  is the frequency of the collocate in the whole corpus\n* The accepted cutoff for a meaningful association is MI > 3\n\n:::\n\n## Association measures\n\n-  Pointwise mutual information (PMI) [@church1990word]. [See Brezina, chapter 3](https://www.cambridge.org/core/books/statistics-in-corpus-linguistics/semantics-and-discourse/3CC9D42A719A484A565BC139E9353A2C#A-sec-32).\n\n![](img/img_collocations/pmi_sensitivity.png){width=38% fig-align=\"center\"}\n\n::: aside\nAs Brezina [-@brezina2018statistics] notes, PMI is highly sensitive to rare co-occurences.\n:::\n\n## Association measures\n\n-  There are several ways of handling this:\n    -   Filter using a minimum frequency.\n    -   Use one of the PMI^k^ family of statistics [@daille1994approche].\n    -   Use NPMI, which normalizes values between 1 and -1 [@bouma2009normalized].\n\n::: {style=\"font-size: 65%;\"}\n\n$$\n\\begin{aligned}\nPMI{^k} = log_{2} \\left( \\frac{O_{11}{^2}}{E_{11}} \\right) = PMI - (1 - k)~\\times~log_{2} \\left( O_{11} \\right)\n\\\\\n\\text{where}~2 \\ge k \\le 3\n\\end{aligned}\n$$\n\n$$\nNPMI = \\frac{PMI}{-log_{2}(O_{11})}\n$$\n:::\n\n## Association measures\n\n-  COCA allows for PMI calculations using the **RELEVANCE** option.\n\n![](img/img_collocations/coca_03.png)\n\n## Association measures {background-image=\"img/img_collocations/coca_04.png\" background-size=\"80%\" background-position=\"bottom\"}\n\n\n## Association measures {background-image=\"img/img_collocations/coca_04.png\" background-size=\"80%\" background-position=\"bottom\" background-opacity=\".25\"}\n\n::: {style=\"padding-top: 100px;\"}\n::: callout-warning\n## Question\n\nWhat differences do you notice from the earlier result using frequencies?\n:::\n:::\n\n## Association measures\n\n::: callout-note\n\nWhen measuring collocations, you must have a data structure of sequential tokens. In other words, something like a document-feature matrix won't work. \n:::\n\n-  In R, this could be a list or vector.\n-  In Python, this could be a list or an array.\n-  Alternatively, this could be a [**polars**](https://pola.rs/) dataframe, which runs in Rust, but has bindings for Python and R.\n\n## Lab: Collocations\n\n-  Begin the lab.\n\n```{.r}\nlibrary(ggraph)\nlibrary(gt)\nlibrary(quanteda)\nlibrary(quanteda.textstats)\nlibrary(tidyverse)\n```\n\n::: callout-note\n\nWe're using the **preprocess_text()** that we introduced in an earlier lab.\n:::\n\n\n```{.r code-line-numbers=\"2\"}\nsc_tokens <- sample_corpus |>\n  mutate(text = preprocess_text(text)) |>\n  corpus() |>\n  tokens(what=\"fastestword\", remove_numbers=TRUE)\n```\n\n\n## Association measures\n\n-  As we would expect, infrequent tokens have the highest association measures.\n\n```{r}\n#| echo: false\n\nreadr::read_csv(\"data/data_collocations/money_collocations.csv\") |>\n  head(10) |>\n  gt::gt() |>\n  gt::opt_table_font(weight = \"bolder\") |>\n  gt::as_raw_html()\n\n```\n\n## Association measures\n\n-  By filtering with thresholds for frequency (5) and PMI (5) the results apprear more interpretable.\n\n```{r}\n#| echo: false\n\nreadr::read_csv(\"data/data_collocations/money_collocations.csv\") |>\n  dplyr::filter(col_freq >= 5 & MI_1 >= 5) |>\n  head(10) |>\n  gt::gt() |>\n  gt::opt_table_font(weight = \"bolder\") |>\n  gt::as_raw_html()\n\n```\n\n## Association measures\n\n-  By filtering with thresholds for frequency (5) and PMI (5) the results apprear more interpretable.\n\n::: callout-warning\n## Question\n\nHow do you determine where to set these kinds of thresholds?\n:::\n\n## A collocational network\n\n-  From the tables, we can generate a collocational network that resembles what Brezina et al. [-@brezina2015collocations] propose.\n\n\n```{.r}\nggraph(net, weight = link_weight, layout = \"stress\") + \n  geom_edge_link(color = \"gray80\", alpha = .75) + \n  geom_node_point(aes(alpha = node_weight, size = 3, color = n_intersects)) +\n  geom_node_text(aes(label = label), repel = T, size = 3) +\n  scale_alpha(range = c(0.2, 0.9)) +\n  theme_graph() +\n  theme(legend.position=\"none\")\n```\n\n## A collocational network\n\n-  From the tables, we can generate a collocational network that resembles what Brezina et al. [-@brezina2015collocations] propose.\n\n![](img/img_collocations/coll_network.svg)\n\n## An example of an application\n\n-  A research group used PMI to create a model that answers standardized test questions [@clark2020f].\n\n![](img/img_collocations/aristo_01.png){height=30% fig-align=\"center\"}\n\n## An example of an application\n\n-  A research group used PMI to create a model that answers standardized test questions [@clark2020f].\n\n\n![](img/img_collocations/aristo_02.png){height=30% fig-align=\"center\"}\n\n## A collocational network\n\n-  Their model performed well [@clark2020f].\n\n\n![](img/img_collocations/aristo_03.png){height=30% fig-align=\"center\"}\n\n## Works cited\n\n","srcMarkdownNoYaml":"\n\n# Collocations & Association Measures {background-color=\"#40666e\"}\n\n## Collocations fundamentals  \n\n-  Using COCA, we can quickly replicate an experiment first conducted by Stubbs [-@stubbs1995collocations] in which he looked at the nouns that collocate with *cause*.\n\n![](img/img_collocations/coca_01.png)\n\n## Collocations fundamentals\n\n::: callout-warning\n## Question\n\nWhat pattern (or patterns) do you recognize?\n:::\n\n![](img/img_collocations/coca_02.png)\n\n## Collocations fundamentals\n\n::: callout-warning\n## Question\n\nWhat statistical problems do you see with using simple frequencies as a measure?\n:::\n\n![](img/img_collocations/coca_02.png)\n\n## Collocations fundamentals {background-image=\"img/img_collocations/group_01.png\"}\n\n::: aside\nImagine you are at a party with people hanging out in small groups...\n:::\n\n## Collocations fundamentals {background-image=\"img/img_collocations/group_02.png\"}\n\n::: aside\n... and \"death\" shows up...\n:::\n\n## Collocations fundamentals {background-image=\"img/img_collocations/group_03.png\"}\n\n::: aside\nA little later, \"cause\" arrives.\n:::\n\n## Collocations fundamentals {background-image=\"img/img_collocations/group_04.png\"}\n\n::: aside\nWhat if we have multiple \"causes\" and \"deaths\"?\n:::\n\n## Collocations fundamentals {background-image=\"img/img_collocations/group_04.png\" background-opacity=\".25\"}\n\n::: {style=\"padding-top: 450px;\"}\n::: callout-warning\n## Question\n\nWhat factors affect the likelihood of \"cause\" and \"effect\" being together in the same group?\n:::\n:::\n\n## Collocations fundamentals\n\n### A window or span.\n\n::: {style=\"font-size: 70%; font-family: monospace; padding-top: 25px;\"}\n|     Pre-node | Node | Post-node     |\n|----------------------------------------:|:-----:|------------------------------------------------------------------|\n| Does chocolate | cause | acne? After many studies, the answer is ... 'complicated' |\n| Shortage of sailors a | cause | for concern for Royal Canadian Navy |\n| Did wine | cause | a full-scale revolution in Armenia? |\n| Motorcycle explosion likely | cause | of Milton motel fire, manager reports |\n| Heavy rainfall, power outages | cause | school districts to close Friday - |\n| Bales of hay | cause | traffic backup along I-55, truck fire |\n:::\n\n## Collocations fundamentals\n\n### A window or span.\n\n::: {style=\"font-size: 70%; font-family: monospace; padding-top: 25px;\"}\n|     Pre-node | Node | Post-node     |\n|----------------------------------------:|:-----:|------------------------------------------------------------------|\n| Does [chocolate]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [acne]{style=\"background-color: #f5b2c6; opacity: 0.75;\"}? After many studies, the answer is ... 'complicated' |\n| Shortage of sailors [a]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [for]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} concern for Royal Canadian Navy |\n| Did [wine]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [a]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} full-scale revolution in Armenia? |\n| Motorcycle explosion [likely]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [of]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} Milton motel fire, manager reports |\n| Heavy rainfall, power [outages]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [school]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} districts to close Friday - |\n| Bales of [hay]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [traffic]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} backup along I-55, truck fire |\n:::\n\n::: aside\n(1L-1R)\n:::\n\n\n## Collocations fundamentals\n\n### A window or span.\n\n::: {style=\"font-size: 70%; font-family: monospace; padding-top: 25px;\"}\n|     Pre-node | Node | Post-node     |\n|----------------------------------------:|:-----:|------------------------------------------------------------------|\n| [Does chocolate]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [acne? After]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} many studies, the answer is ... 'complicated' |\n| Shortage of [sailors a]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [for concern]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} for Royal Canadian Navy |\n| [Did wine]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [a full-scale]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} revolution in Armenia? |\n| Motorcycle [explosion likely]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [of Milton]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} motel fire, manager reports |\n| Heavy rainfall, [power outages]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [school districts]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} to close Friday - |\n| Bales [of hay]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [traffic backup]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} along I-55, truck fire |\n:::\n\n::: aside\nA window or span can be symetrical (e.g, 2L-2R) as it is here, or asymetrical (0L-2R).\n:::\n\n## Collocations fundamentals\n\n### A window or span.\n\n::: {style=\"font-size: 70%; font-family: monospace; padding-top: 25px;\"}\n|     Pre-node | Node | Post-node     |\n|----------------------------------------:|:-----:|------------------------------------------------------------------|\n| [Does chocolate]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [acne? After]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} many studies, the answer is ... 'complicated' |\n| Shortage of [sailors a]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [for concern]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} for Royal Canadian Navy |\n| [Did wine]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [a full-scale]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} revolution in Armenia? |\n| Motorcycle [explosion likely]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [of Milton]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} motel fire, manager reports |\n| Heavy rainfall, [power outages]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [school districts]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} to close Friday - |\n| Bales [of hay]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} | cause | [traffic backup]{style=\"background-color: #f5b2c6; opacity: 0.75;\"} along I-55, truck fire |\n:::\n\n::: aside\nThis is based on Firth's [-@firth1957papers] principle of \"knowing  a word by the company it keeps\" -- a principle that undergirds current LLMs and which we discussed in our introduction to them.\n:::\n\n\n## Association measures\n\n-  Pointwise mutual information (PMI) [@church1990word]. [See Brezina, chapter 3](https://www.cambridge.org/core/books/statistics-in-corpus-linguistics/semantics-and-discourse/3CC9D42A719A484A565BC139E9353A2C#A-sec-32).\n\n::: {style=\"font-size: 65%;\"}\nThe formula for calculating MI is as follows:\n\n$$\nPMI = log_{2} \\left( \\frac{O_{11}}{E_{11}} \\right)\n$$\n\nWhere *O~11~* and *E~11~* are the observed (i.e., collocate in the span divided by the total number of words in the corpus) and expected frequencies of the node word within a given window. The expected frequency is given by:\n\n$$\nE_{11} = \\frac{R_{1} \\times C_{1}}{N}\n$$\n\n* *N* is the number of words in the corpus\n* *R~1~* is the frequency of the node in the whole corpus\n* *C~1~*  is the frequency of the collocate in the whole corpus\n* The accepted cutoff for a meaningful association is MI > 3\n\n:::\n\n## Association measures\n\n-  Pointwise mutual information (PMI) [@church1990word]. [See Brezina, chapter 3](https://www.cambridge.org/core/books/statistics-in-corpus-linguistics/semantics-and-discourse/3CC9D42A719A484A565BC139E9353A2C#A-sec-32).\n\n![](img/img_collocations/pmi_sensitivity.png){width=38% fig-align=\"center\"}\n\n::: aside\nAs Brezina [-@brezina2018statistics] notes, PMI is highly sensitive to rare co-occurences.\n:::\n\n## Association measures\n\n-  There are several ways of handling this:\n    -   Filter using a minimum frequency.\n    -   Use one of the PMI^k^ family of statistics [@daille1994approche].\n    -   Use NPMI, which normalizes values between 1 and -1 [@bouma2009normalized].\n\n::: {style=\"font-size: 65%;\"}\n\n$$\n\\begin{aligned}\nPMI{^k} = log_{2} \\left( \\frac{O_{11}{^2}}{E_{11}} \\right) = PMI - (1 - k)~\\times~log_{2} \\left( O_{11} \\right)\n\\\\\n\\text{where}~2 \\ge k \\le 3\n\\end{aligned}\n$$\n\n$$\nNPMI = \\frac{PMI}{-log_{2}(O_{11})}\n$$\n:::\n\n## Association measures\n\n-  COCA allows for PMI calculations using the **RELEVANCE** option.\n\n![](img/img_collocations/coca_03.png)\n\n## Association measures {background-image=\"img/img_collocations/coca_04.png\" background-size=\"80%\" background-position=\"bottom\"}\n\n\n## Association measures {background-image=\"img/img_collocations/coca_04.png\" background-size=\"80%\" background-position=\"bottom\" background-opacity=\".25\"}\n\n::: {style=\"padding-top: 100px;\"}\n::: callout-warning\n## Question\n\nWhat differences do you notice from the earlier result using frequencies?\n:::\n:::\n\n## Association measures\n\n::: callout-note\n\nWhen measuring collocations, you must have a data structure of sequential tokens. In other words, something like a document-feature matrix won't work. \n:::\n\n-  In R, this could be a list or vector.\n-  In Python, this could be a list or an array.\n-  Alternatively, this could be a [**polars**](https://pola.rs/) dataframe, which runs in Rust, but has bindings for Python and R.\n\n## Lab: Collocations\n\n-  Begin the lab.\n\n```{.r}\nlibrary(ggraph)\nlibrary(gt)\nlibrary(quanteda)\nlibrary(quanteda.textstats)\nlibrary(tidyverse)\n```\n\n::: callout-note\n\nWe're using the **preprocess_text()** that we introduced in an earlier lab.\n:::\n\n\n```{.r code-line-numbers=\"2\"}\nsc_tokens <- sample_corpus |>\n  mutate(text = preprocess_text(text)) |>\n  corpus() |>\n  tokens(what=\"fastestword\", remove_numbers=TRUE)\n```\n\n\n## Association measures\n\n-  As we would expect, infrequent tokens have the highest association measures.\n\n```{r}\n#| echo: false\n\nreadr::read_csv(\"data/data_collocations/money_collocations.csv\") |>\n  head(10) |>\n  gt::gt() |>\n  gt::opt_table_font(weight = \"bolder\") |>\n  gt::as_raw_html()\n\n```\n\n## Association measures\n\n-  By filtering with thresholds for frequency (5) and PMI (5) the results apprear more interpretable.\n\n```{r}\n#| echo: false\n\nreadr::read_csv(\"data/data_collocations/money_collocations.csv\") |>\n  dplyr::filter(col_freq >= 5 & MI_1 >= 5) |>\n  head(10) |>\n  gt::gt() |>\n  gt::opt_table_font(weight = \"bolder\") |>\n  gt::as_raw_html()\n\n```\n\n## Association measures\n\n-  By filtering with thresholds for frequency (5) and PMI (5) the results apprear more interpretable.\n\n::: callout-warning\n## Question\n\nHow do you determine where to set these kinds of thresholds?\n:::\n\n## A collocational network\n\n-  From the tables, we can generate a collocational network that resembles what Brezina et al. [-@brezina2015collocations] propose.\n\n\n```{.r}\nggraph(net, weight = link_weight, layout = \"stress\") + \n  geom_edge_link(color = \"gray80\", alpha = .75) + \n  geom_node_point(aes(alpha = node_weight, size = 3, color = n_intersects)) +\n  geom_node_text(aes(label = label), repel = T, size = 3) +\n  scale_alpha(range = c(0.2, 0.9)) +\n  theme_graph() +\n  theme(legend.position=\"none\")\n```\n\n## A collocational network\n\n-  From the tables, we can generate a collocational network that resembles what Brezina et al. [-@brezina2015collocations] propose.\n\n![](img/img_collocations/coll_network.svg)\n\n## An example of an application\n\n-  A research group used PMI to create a model that answers standardized test questions [@clark2020f].\n\n![](img/img_collocations/aristo_01.png){height=30% fig-align=\"center\"}\n\n## An example of an application\n\n-  A research group used PMI to create a model that answers standardized test questions [@clark2020f].\n\n\n![](img/img_collocations/aristo_02.png){height=30% fig-align=\"center\"}\n\n## A collocational network\n\n-  Their model performed well [@clark2020f].\n\n\n![](img/img_collocations/aristo_03.png){height=30% fig-align=\"center\"}\n\n## Works cited\n\n"},"formats":{"clean-revealjs":{"identifier":{"display-name":"RevealJS","target-format":"clean-revealjs","base-format":"revealjs","extension-name":"clean"},"execute":{"fig-width":10,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":false,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":true,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"shortcodes":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","html-math-method":{"method":"mathjax","url":"https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"},"slide-level":2,"to":"revealjs","filters":[],"output-file":"lec_collocations.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words"},"metadata":{"lang":"en","fig-responsive":false,"quarto-version":"1.4.549","auto-stretch":true,"theme":["default","_extensions/grantmcdermott/clean/clean.scss"],"menu":{"side":"left"},"slideNumber":true,"date-format":"[Fall] YYYY","revealjs-plugins":[],"editor":"visual","title":"Collocations","subtitle":"Introduction to association measures","author":[{"name":"David Brown","orcid":"0000-0001-7745-6354","email":"dwb2@andrew.cmu.edu","affiliations":"Statistics & Data Science 36-468/668"}],"date":"last-modified","title-slide-attributes":{"data-background-image":"img/img_shared/text_analysis.png","data-background-size":"5%","data-background-position":"30% 50%"},"bibliography":["refs/refs_collocations.bib"],"transition":"fade"}}},"projectFormats":[]}